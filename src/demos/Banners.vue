<template>
  <div>
    <h1>Banners</h1>
    <TabsNew
      :tabs="tabs"
      :update-route="false"
      :selected="selectedTab"
    >
      <template #marketing>
        <h2>Marketing Banner</h2>
        <DemoSection
          title="Marketing Banner"
          :code="demoCode"
        >
          <template #components>
            <banner-marketing
              bg-image="
                https://cdn.streamlabs.com/static/imgs/pretzel_dashboard_banner_bg.png
              "
              bg-image-night="
                http://cdn.backgroundhost.com/backgrounds/subtlepatterns/cartographer.png
              "
              icon-name="themes"
              label="Introducing Streamlabs OBS"
              title="Largest library of free themes in the world."
              desc="
                To access over 700+ themes for free, download Streamlabs OBS.
              "
              link-desc="Win 7+  245.8 MB"
              :on-toggle="test"
            >
              <template #link>
                <Button
                  type="a"
                  variation="action"
                  size="standard"
                  href="#"
                  title="Download"
                  icon="overview"
                />
              </template>
            </banner-marketing>
          </template>
        </DemoSection>

        <banner-marketing
          bg-image="
            https://cdn.streamlabs.com/static/imgs/pretzel_dashboard_banner_bg.png
          "
          icon-image="require(../assets/imgs/pretzel-icon.png)"
          label="New Streamlabs OBS App"
          title="Introducing Pretzel Rocks Music Player"
          desc="
            Stream-safe music for broadcasters with an ever-growing catalog of music. Currently 5k+ tracks.
          "
          link-desc="$4.99/mo"
          :banner-closed="bannerClosed"
        >
          <template #link>
            <Button
              type="a"
              variation="action"
              size="standard"
              href="#"
              title="Try It Now"
            />
          </template>
        </banner-marketing>

        <table class="docs-table">
          <thead>
            <tr>
              <th>Prop</th>
              <th>Type</th>
              <th>Required</th>
              <th>Default</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>bgImage</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Background image that will display in day mode.</td>
            </tr>
            <tr>
              <td>bgImageNight</td>
              <td>string</td>
              <td>false</td>
              <td>null</td>
              <td>Background image that will display in night mode.</td>
            </tr>
            <tr>
              <td>label</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Label text in the upper left of the banner.</td>
            </tr>
            <tr>
              <td>iconImage</td>
              <td>string</td>
              <td>false</td>
              <td>null</td>
              <td>
                Icon image next to title. Use a url path. If using iconName - do
                not use iconImg. We will improve functionality in near future.
              </td>
            </tr>
            <tr>
              <td>iconName</td>
              <td>string</td>
              <td>false</td>
              <td>null</td>
              <td>
                Icon next to title. Use icon name from icon list. If using
                iconImg - do not use iconName. We will improve functionality in
                near future.
              </td>
            </tr>
            <tr>
              <td>title</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Main banner title.</td>
            </tr>
            <tr>
              <td>desc</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Description text below banner title.</td>
            </tr>
            <tr>
              <td>linkDesc</td>
              <td>string</td>
              <td>false</td>
              <td>null</td>
              <td>Description text below link.</td>
            </tr>
            <tr>
              <td>bannerClosed</td>
              <td>boolean</td>
              <td>false</td>
              <td>false</td>
              <td>Default state the banner is. Open by default.</td>
            </tr>
            <tr>
              <td>onToggle</td>
              <td>function</td>
              <td>null</td>
              <td>false</td>
              <td>Function which is called when you toggle the icon close.</td>
            </tr>
          </tbody>
        </table>
      </template>

      <template #sale>
        <h2>Sale Banner</h2>
        <DemoSection
          title="Sale Banner"
          :code="demoCode"
        >
          <template #components>
            <banner-sale
              title="Flash Sale! 25% off everything!"
              desc="All items are automatically discounted."
              days="00"
              hours="00"
              minutes="00"
              :seconds="secs"
              time-desc="Until flash sale ends. Hurry!"
            />
          </template>
        </DemoSection>

        <table class="docs-table">
          <thead>
            <tr>
              <th>Prop</th>
              <th>Type</th>
              <th>Required</th>
              <th>Default</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>title</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Banner main title.</td>
            </tr>
            <tr>
              <td>desc</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Banner description text below main title.</td>
            </tr>
            <tr>
              <td>days</td>
              <td>string</td>
              <td>true</td>
              <td>"00"</td>
              <td>Days remaining value for countdown timer</td>
            </tr>
            <tr>
              <td>hours</td>
              <td>string</td>
              <td>true</td>
              <td>"00"</td>
              <td>Hours remaining value for countdown timer</td>
            </tr>
            <tr>
              <td>minutes</td>
              <td>string</td>
              <td>true</td>
              <td>"00"</td>
              <td>Minutes remaining value for countdown timer</td>
            </tr>
            <tr>
              <td>seconds</td>
              <td>string</td>
              <td>true</td>
              <td>"00"</td>
              <td>Seconds remaining value for countdown timer</td>
            </tr>
            <tr>
              <td>timeDesc</td>
              <td>string</td>
              <td>false</td>
              <td>null</td>
              <td>Description text below countdown timer.</td>
            </tr>
            <tr>
              <td>borderColor</td>
              <td>string</td>
              <td>false</td>
              <td>"rgba(248, 86, 64, 0.33)"</td>
              <td>Banner border color.</td>
            </tr>
            <tr>
              <td>backgroundColor</td>
              <td>boolean</td>
              <td>false</td>
              <td>"rgba(248, 86, 64, 0.08)"</td>
              <td>Banner background color.</td>
            </tr>
          </tbody>
        </table>
      </template>

      <template #notice>
        <h2>Notice Banner</h2>
        <DemoSection
          title="Notice Banner"
          :code="demoCode"
        >
          <template #components>
            <Notice
              title="
                Join affiliates and earn $1 for each Streamlabs OBS referral
              "
              desc="
                Share your unique referral link with friends and get paid directly into your PayPal each month.
              "
              icon="information"
            >
              <template #button>
                <Button
                  type="button"
                  size="fixed-width"
                  variation="action"
                  title="Join"
                />
              </template>
            </Notice>
          </template>
        </DemoSection>

        <br>
        <br>

        <Notice
          variation="warning"
          title="Your donation link has expired"
          desc="Copy your new donation link and replace all instances containing twitchalerts.com."
        >
          <template #button>
            <Button
              type="button"
              size="fixed-width"
              variation="default"
              title="Copy Link"
            />
          </template>
        </Notice>

        <table class="docs-table">
          <thead>
            <tr>
              <th>Prop</th>
              <th>Type</th>
              <th>Required</th>
              <th>Default</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>variation</td>
              <td>string</td>
              <td>true</td>
              <td>default</td>
              <td>
                Variation style that will be displayed. Options are "default"
                and "warning".
              </td>
            </tr>
            <tr>
              <td>title</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Banner title</td>
            </tr>
            <tr>
              <td>desc</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>Description text below banner title</td>
            </tr>
            <tr>
              <td>icon</td>
              <td>string</td>
              <td>true</td>
              <td>null</td>
              <td>
                Icon next to title and in background. Will override selected
                variation icon. Use icon name from icon list.
              </td>
            </tr>
          </tbody>
        </table>
      </template>

      <template #discord>
        <h2>Discord Banner</h2>
        <DemoSection
          title="Discord Banner"
          :code="demoCode"
        >
          <template #components>
            <BannerDiscord />
          </template>
        </DemoSection>

        <table class="docs-table">
          <thead>
            <tr>
              <th>Prop</th>
              <th>Type</th>
              <th>Default</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>title</td>
              <td>string</td>
              <td>
                Join the Streamlabs OBS Discussion on
                &lt;span&gt;Discord&lt;/span&gt;
              </td>
              <td>
                Set the title of the banner. You can wrap text in
                <code>&lt;span&gt;</code> tags to give them medium font weight.
              </td>
            </tr>
          </tbody>
        </table>
      </template>
    </TabsNew>
  </div>
</template>

<script lang="ts">
import {
  computed, defineComponent, onMounted, ref,
} from 'vue';
import BannersCode from '!!raw-loader!./Banners.vue';
import BannerDiscord from '../components/BannerDiscord.vue';
import BannerMarketing from '../components/BannerMarketing.vue';
import BannerSale from '../components/BannerSale.vue';
import Button from '../components/Button.vue';
import DemoSection from '../components/DemoSection.vue';
import Notice from '../components/Notice.vue';
import Tabs from '../components/Tabs.vue';
import TabsNew from '../components/TabsNew.vue';

export default defineComponent({
  components: {
    BannerDiscord,
    BannerMarketing,
    BannerSale,
    Button,
    DemoSection,
    Notice,
    Tabs,
    TabsNew,
  },

  setup() {
    const demoCode: string = BannersCode;
    const tabs = [
      {
        name: 'Marketing',
        value: 'marketing',
      },
      {
        name: 'Sale',
        value: 'sale',
      },
      {
        name: 'Notice',
        value: 'notice',
      },
      {
        name: 'Discord',
        value: 'discord',
      },
    ];

    const selectedTab = ref('marketing');
    const remainingSecs = ref(10);
    const bannerClosed = ref(false);

    onMounted(() => {
      setInterval(() => {
        remainingSecs.value -= 1;
        if (remainingSecs.value < 0) {
          remainingSecs.value = 10;
        }
      }, 1000);
    });

    const secs = computed(() => (remainingSecs.value < 10 ? `0${remainingSecs.value}` : `${remainingSecs.value}`));

    function onSelectTabHandler(tab: string) {
      selectedTab.value = tab;
    }

    function test() {
      console.log('test');
    }

    return {
      demoCode,
      tabs,
      selectedTab,
      remainingSecs,
      bannerClosed,
      secs,
      onSelectTabHandler,
      test,
    };
  },
});
</script>
